<!DOCTYPE html>
<html lang="en">
<head>
    <style>
       html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;            /* no browser scrollbars */
}

        #main-wrapper {
            width: 75vw;
            max-width: 1000px;
            margin: 0 auto;
            height: 95vh;
            overflow-y: auto;
            box-sizing: border-box;
            padding: 1rem;
        }
    </style>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow-x: hidden; /* Prevent horizontal scrollbars only */
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        /* Main container optimized for full viewport */
        .main-container {
            width: 100vw;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            box-sizing: border-box;
        }

        .content-wrapper {
            width: 100%;
            max-width: 1400px;
            min-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }
    </style>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>
        Geometric Distribution Calculator
    </title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/annotations.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jstat@1.9.6/dist/jstat.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"/>
    
    <!-- Common Calculator Styles -->
    <link href="calculator-common.css" rel="stylesheet"/>
    <style>
        :root {
            --surface-0: #0c1624; /* page background */
            --surface-1: #1a1f2e; /* cards / panels - warmer dark gray-blue */
            --surface-2: #242938; /* chart / results boxes */
            --border: #2d3748; /* softer border color */
            --accent-1: rgb(255,165,120); /* warm orange */
            --accent-2: rgb(120,200,255); /* cyan blue */
            --text-primary: #ffffff;
            --text-secondary: rgba(255,255,255,0.8);
            --text-muted: rgba(255,255,255,0.6);
            --panel-bg: var(--surface-1);
            --panel-radius: 10px;
            --panel-shadow: 0px 4px 20px rgba(0, 0, 0, 0.4);
            --header-bg: var(--surface-0);
            --header-color: var(--accent-1);
            --highlight-bg: rgba(255, 165, 120, 0.2);
            --highlight-text: var(--accent-1);
            --primary-blue: var(--accent-1);
            --primary-blue-hover: rgb(230,140,90);
            --success-green: #27ae60;
            --warning-orange: #f39c12;
            --danger-red: #e74c3c;
            --pad: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--surface-0);
            color: var(--text-primary);
        }

        #main-wrapper {
            width: 100%;
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .main-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .content-wrapper {
            flex: 1;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            height: 100%;
        }

        /* Panel Animation Support */
        .left-panel, .right-panel, [class*="panel"] {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--header-bg) 0%, #1a1a2e 100%);
            border-radius: var(--panel-radius);
            box-shadow: var(--panel-shadow);
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--header-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            color: #bbb;
            font-size: 1.1rem;
            font-weight: 300;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            flex: 1;
            min-height: 0;
        }

        .controls-panel {
            background: var(--panel-bg);
            border-radius: var(--panel-radius);
            padding: 20px;
            box-shadow: var(--panel-shadow);
            overflow-y: auto;
            max-height: 100%;
        }

        .controls-panel h3 {
            color: var(--header-color);
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--header-color);
            padding-bottom: 8px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #ecf0f1;
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #34495e;
            border-radius: 8px;
            background: #2c3e50;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--header-color);
            box-shadow: 0 0 10px rgba(255, 152, 0, 0.3);
        }

        .calculation-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 10px 15px;
            background: #34495e;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }

        .tab-button.active {
            background: var(--header-color);
            color: black;
            font-weight: bold;
        }

        .tab-button:hover:not(.active) {
            background: #4a5f7a;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }



        .reset-button {
            width: 100%;
            padding: 10px;
            background: #34495e;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .reset-button:hover {
            background: #4a5f7a;
        }

        .info-button {
            width: 100%;
            padding: 10px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .info-button:hover {
            background: var(--header-color);
            color: white;
        }

        .chart-panel {
            background: var(--panel-bg);
            border-radius: var(--panel-radius);
            padding: 25px;
            box-shadow: var(--panel-shadow);
        }

        .chart-container {
            height: 400px;
            width: 100%;
            margin-bottom: 20px;
        }

        .result-panel {
            background: var(--panel-bg);
            border-radius: var(--panel-radius);
            padding: 25px;
            box-shadow: var(--panel-shadow);
            margin-top: 20px;
        }

        .result-panel h3 {
            color: var(--header-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .result-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--header-color);
            margin: 10px 0;
            text-align: center;
            padding: 15px;
            background: var(--highlight-bg);
            border-radius: 8px;
            border: 2px solid rgba(255, 152, 0, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: #34495e;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .stat-label {
            font-size: 0.9rem;
            color: #bdc3c7;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--header-color);
        }

        .info-panel {
            background: var(--panel-bg);
            border-radius: var(--panel-radius);
            padding: 25px;
            box-shadow: var(--panel-shadow);
            margin-top: 20px;
        }

        .info-panel h3 {
            color: var(--header-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-panel p {
            color: #bdc3c7;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .info-panel .formula {
            background: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            border-left: 4px solid var(--header-color);
        }

        .keyboard-shortcuts {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .shortcut {
            background: #34495e;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #bdc3c7;
        }

        .shortcut kbd {
            background: #2c3e50;
            padding: 2px 6px;
            border-radius: 3px;
            color: var(--header-color);
            font-weight: bold;
        }

        .visualization-panel {
            background: var(--panel-bg);
            border-radius: var(--panel-radius);
            padding: 20px;
            box-shadow: var(--panel-shadow);
            display: flex;
            flex-direction: column;
            min-height: 0;
            overflow: hidden;
        }

        .chart-container {
            flex: 1 1 auto;
            min-height: 200px;
            max-height: 60vh;
        }

        .radio-option.selected.quantile-mode {
            border-color: rgb(255,165,120);
            background: rgba(52, 152, 219, 0.2);
        }

        .shaded-area-info.quantile-mode {
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.4);
        }

        .shaded-area-info.quantile-mode #equationText,
        .shaded-area-info.quantile-mode #percentageText {
            color: rgb(255,165,120);
        }

        .shaded-area-info.quantile-mode #percentageText {
            font-size: 0.8em;
            opacity: 0.9;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .input-row {
                flex-direction: column;
                gap: 8px;
            }
        }

        @media (max-width: 768px) {
            html, body {
                overflow-x: hidden;
                overflow-y: auto;
                height: auto;
                min-height: 100vh;
            }

            .main-container {
                height: auto;
                min-height: 100vh;
                align-items: flex-start;
            }

            .content-wrapper {
                height: auto;
                min-height: auto;
            }

            .container {
                padding: 10px;
                height: auto;
                min-height: 100vh;
                overflow: visible;
            }

            .main-content {
                display: flex;
                flex-direction: column;
                height: auto;
                min-height: 0;
                gap: 15px;
            }

            .visualization-panel {
                overflow-y: auto;
                max-height: none;
                height: auto;
                min-height: 600px;
            }

            .chart-container {
                width: 100%;
                height: 400px !important;
                min-height: 400px !important;
                max-height: none;
                overflow: visible;
                position: relative;
            }

            .chart-container > div {
                width: 100% !important;
                height: 100% !important;
            }

            /* Hide plot line labels on mobile to prevent overlap */
            .highcharts-plot-line-label {
                display: none !important;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .tabs-and-options-row {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }

            .tabs {
                flex-wrap: wrap;
                justify-content: center;
            }

            .chart-options-toolbar {
                justify-content: center;
                gap: 10px;
                flex-wrap: wrap;
            }

            .results-row {
                flex-direction: column;
                gap: 10px;
            }

            .about-content {
                margin: 15px;
                padding: 15px;
                max-width: calc(100% - 30px);
                max-height: 90vh;
            }

            .about-title {
                font-size: 1.3rem;
            }

            .applications-grid {
                grid-template-columns: 1fr;
            }

            .tooltip {
                max-width: 200px;
                font-size: 0.75rem;
                padding: 8px 10px;
            }
            
            .calculation-tabs {
                flex-direction: column;
            }
            
            .tab-button {
                min-width: unset;
            }
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .error {
            color: var(--danger-red);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .success {
            color: var(--success-green);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 0.6s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Popup Modal Styles */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            animation: fadeInOverlay 0.3s ease;
        }

        .popup-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--panel-bg);
            border-radius: var(--panel-radius);
            box-shadow: var(--panel-shadow);
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 1001;
            animation: slideInModal 0.4s ease;
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--header-color);
            padding-bottom: 10px;
        }

        .popup-title {
            color: var(--header-color);
            font-size: 1.4rem;
            margin: 0;
        }

        .popup-close {
            background: none;
            border: none;
            color: #bdc3c7;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            background: var(--header-color);
            color: white;
        }

        .popup-content {
            color: #bdc3c7;
            line-height: 1.6;
        }

        .popup-content p {
            margin-bottom: 15px;
        }

        .popup-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .popup-content li {
            margin-bottom: 5px;
        }

        .popup-formula {
            background: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border-left: 4px solid var(--header-color);
        }

        @keyframes fadeInOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }

                 @keyframes slideInModal {
             from { 
                 opacity: 0;
                 transform: translate(-50%, -60%);
                 scale: 0.9;
             }
             to { 
                 opacity: 1;
                 transform: translate(-50%, -50%);
                 scale: 1;
             }
         }

         /* Combined Tabs and Options Row */
        .tabs-and-options-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #555;
            padding-bottom: 10px;
        }

        .tabs {
            display: flex;
            margin-bottom: 0;
            border-bottom: none;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: #bbb;
            position: relative;
            overflow: hidden;
        }

        .tab:hover {
            color: white;
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .tab.active {
            color: var(--header-color);
            border-bottom-color: var(--header-color);
            background: rgba(255, 152, 0, 0.1);
            transform: translateY(0);
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .tab.switching {
            animation: tabSwitchPulse 0.8s ease;
        }

        @keyframes tabSwitchPulse {
            0% {
                transform: translateY(0);
                box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
            }
            50% {
                transform: translateY(-4px);
                box-shadow: 0 8px 24px rgba(255, 152, 0, 0.5);
            }
            100% {
                transform: translateY(0);
                box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
            }
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Chart Options Toolbar Styles */
        .chart-options-toolbar {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .chart-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            color: #bbb;
            font-weight: 500;
            white-space: nowrap;
        }

        .option-label i {
            font-size: 0.8rem;
            color: var(--header-color);
            opacity: 0.8;
        }

        .mini-dropdown {
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            color: white;
            padding: 4px 8px;
            font-size: 0.8rem;
            min-width: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mini-dropdown:hover {
            background: rgba(255,255,255,0.12);
            border-color: var(--header-color);
        }

        .mini-dropdown:focus {
            outline: none;
            border-color: var(--header-color);
            background: rgba(255, 152, 0, 0.1);
            box-shadow: 0 0 8px rgba(255, 152, 0, 0.3);
        }

        .mini-dropdown option {
            background: #2c3e50;
            color: white;
            padding: 4px;
        }

        /* Results Row Layout */
        .results-row {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            align-items: stretch;
        }

        .results-row .probability-visualization {
            flex: 0 0 45%;
            margin-top: 0;
        }

        .results-row .embedded-results-panel {
            flex: 1;
            margin-top: 0;
        }

        .probability-visualization {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 15px;
        }

        /* Chart Animation Styles */
        #pdfChart, #cdfChart, #combinedChart {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
        }

        #pdfChart:hover, #cdfChart:hover, #combinedChart:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .shaded-area-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 152, 0, 0.1);
            border-radius: 6px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .shaded-area-info.updating {
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.3);
            transform: scale(1.02);
            box-shadow: 0 4px 16px rgba(52, 152, 219, 0.2);
        }

        /* Embedded Results Panel Styles */
        .embedded-results-panel {
            background: rgba(0,0,0,0.2);
            border-radius: 6px;
            padding: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .panel-title {
            font-size: 1.4rem;
            color: var(--header-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .embedded-panel-title {
            font-size: 0.85rem;
            color: var(--header-color);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .embedded-stats-grid {
            display: flex;
            gap: 4px;
            flex-wrap: nowrap;
            justify-content: center;
            overflow-x: auto;
        }

        .embedded-stat-item {
            background: rgba(255,255,255,0.08);
            padding: 4px 6px;
            border-radius: 4px;
            text-align: center;
            min-width: 55px;
            flex: 0 0 auto;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
        }

        .embedded-stat-item.updating {
            transform: scale(1.05) translateY(-2px);
            background: rgba(52, 152, 219, 0.2);
            box-shadow: 0 4px 16px rgba(52, 152, 219, 0.3);
        }

        .embedded-stat-item:hover {
            background: rgba(255,255,255,0.12);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .embedded-stat-item.primary-result {
            background: rgba(255, 152, 0, 0.15);
            border: 1px solid rgba(255, 152, 0, 0.3);
            min-width: 65px;
        }

        .embedded-stat-item.primary-result:hover {
            background: rgba(255, 152, 0, 0.25);
            box-shadow: 0 4px 16px rgba(255, 152, 0, 0.3);
        }

        .embedded-stat-value {
            font-size: 0.85rem;
            font-weight: bold;
            color: var(--header-color);
            line-height: 1.1;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .embedded-stat-value.animating {
            color: rgb(255,165,120);
            transform: scale(1.1);
            text-shadow: 0 0 8px rgba(52, 152, 219, 0.5);
        }

        .embedded-stat-item.primary-result .embedded-stat-value {
            color: var(--header-color);
        }

        .embedded-stat-label {
            color: #bbb;
            font-size: 0.65rem;
            margin-top: 1px;
            line-height: 1;
            transition: color 0.3s ease;
        }

        @media (max-width: 768px) {
            .tabs-and-options-row {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }

            .tabs {
                flex-wrap: wrap;
                justify-content: center;
            }

            .chart-options-toolbar {
                justify-content: center;
                gap: 15px;
                flex-wrap: wrap;
            }

            .option-label {
                font-size: 0.8rem;
            }

            .mini-dropdown {
                font-size: 0.75rem;
                min-width: 45px;
            }

            .results-row {
                flex-direction: column;
                gap: 15px;
            }

            .results-row .probability-visualization {
                flex: none;
            }

            .results-row .embedded-results-panel {
                flex: none;
            }

            .embedded-stats-grid {
                gap: 3px;
                justify-content: flex-start;
            }

            .embedded-stat-item {
                min-width: 45px;
                padding: 3px 4px;
            }

            .embedded-stat-value {
                font-size: 0.6rem;
            }

            .embedded-stat-label {
                font-size: 0.45rem;
            }

            /* Mobile chart and container fixes */
            body {
                overflow-y: auto !important;
                overflow-x: hidden !important;
                height: auto !important;
                min-height: 100vh !important;
            }

            .chart-container {
                width: 100%;
                height: 400px !important;
                min-height: 400px !important;
                max-height: none;
                overflow: visible;
                position: relative;
            }

            .chart-container > div {
                width: 100% !important;
                height: 100% !important;
            }

            /* Hide plot line labels on mobile to prevent overlap */
            .highcharts-plot-line-label {
                display: none !important;
            }
        }

                /* Input Interaction Animations */
        input[type="number"] {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input[type="number"]:focus {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 152, 0, 0.4);
            border-color: var(--header-color);
        }

        input[type="number"]:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .mini-dropdown {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mini-dropdown:focus, .mini-dropdown:hover {
            transform: scale(1.05);
            box-shadow: 0 0 12px rgba(255, 152, 0, 0.3);
        }

        /* Calculation Button Animations */
        .calculation-button {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .calculation-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.3);
        }

        .calculation-button.active {
            animation: pulseActiveOrange 2s ease-in-out infinite;
        }

        @keyframes pulseActiveOrange {
            0%, 100% {
                box-shadow: 0 0 15px rgba(255, 152, 0, 0.4);
            }
            50% {
                box-shadow: 0 0 25px rgba(255, 152, 0, 0.6);
            }
        }

        /* Custom Tooltip Styles */
        .tooltip {
            position: relative;
            cursor: help;
        }

         .tooltip::before {
             content: attr(data-tooltip);
             position: absolute;
             bottom: 125%;
             left: 50%;
             transform: translateX(-50%);
             background: rgba(0, 0, 0, 0.9);
             color: white;
             padding: 8px 12px;
             border-radius: 6px;
             font-size: 0.85rem;
             font-weight: normal;
             white-space: nowrap;
             opacity: 0;
             visibility: hidden;
             transition: all 0.3s ease;
             z-index: 1000;
             pointer-events: none;
             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
         }

         .tooltip::after {
             content: '';
             position: absolute;
             bottom: 117%;
             left: 50%;
             transform: translateX(-50%);
             border: 5px solid transparent;
             border-top-color: rgba(0, 0, 0, 0.9);
             opacity: 0;
             visibility: hidden;
             transition: all 0.3s ease;
             z-index: 1000;
             pointer-events: none;
         }

         .tooltip:hover::before,
         .tooltip:hover::after {
             opacity: 1;
             visibility: visible;
         }

         /* Adjust tooltip position for inputs that might be near screen edges */
         .tooltip.tooltip-left::before {
             left: 0;
             transform: translateX(0);
         }

         .tooltip.tooltip-left::after {
             left: 20px;
             transform: translateX(0);
         }

         .tooltip.tooltip-right::before {
             right: 0;
             left: auto;
             transform: translateX(0);
         }

         .tooltip.tooltip-right::after {
             right: 20px;
             left: auto;
             transform: translateX(0);
         }

        /* Enhanced Tooltip System & About Modal */
        .tooltip-container { position: relative; display: inline-block; }
        .tooltip { position: absolute; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 12px 16px; border-radius: 8px; font-size: 0.85rem; line-height: 1.4; max-width: 280px; width: max-content; z-index: 1000; opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 8px 32px rgba(0,0,0,0.4); border: 1px solid rgba(255,165,120,0.3); pointer-events: none; }
        .tooltip::before { content: ''; position: absolute; top: -6px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #2c3e50; }
        .tooltip.bottom { top: calc(100% + 10px); left: 50%; transform: translateX(-50%) translateY(10px); }
        .tooltip.top { bottom: calc(100% + 10px); left: 50%; transform: translateX(-50%) translateY(-10px); }
        .tooltip.top::before { top: auto; bottom: -6px; border-bottom: none; border-top: 6px solid #2c3e50; }
        .tooltip-container:hover .tooltip, .tooltip-container:focus-within .tooltip { opacity: 1; visibility: visible; transform: translateY(0); }
        .tooltip-container:hover .tooltip.top, .tooltip-container:focus-within .tooltip.top { transform: translateX(-50%) translateY(0); }
        .tooltip strong { color: var(--header-color); display: block; margin-bottom: 4px; font-size: 0.9rem; }
        .tooltip .tooltip-formula { font-family: 'Courier New', monospace; background: rgba(0,0,0,0.3); padding: 4px 6px; border-radius: 4px; margin: 6px 0; font-size: 0.8rem; color: #e8e8e8; }
        .tooltip .tooltip-example { color: #bbb; font-style: italic; margin-top: 6px; font-size: 0.8rem; }
        .input-group label, .option-label, .embedded-stat-label { cursor: help; transition: color 0.3s ease; }
        .input-group label:hover, .option-label:hover { color: var(--header-color); }
        .tooltip-icon { display: inline-flex; align-items: center; justify-content: center; width: 14px; height: 14px; background: linear-gradient(135deg, rgb(255,165,120), #2980b9); color: white; border-radius: 50%; font-size: 8px; margin-left: 6px; vertical-align: middle; opacity: 0.7; transition: all 0.3s ease; cursor: help; box-shadow: 0 2px 4px rgba(52, 152, 219, 0.3); }
        .tooltip-icon:hover { opacity: 1; transform: scale(1.1); box-shadow: 0 4px 8px rgba(52, 152, 219, 0.4); }
        .tooltip-icon i { font-size: 7px; }
        .tooltip-container.with-icon { display: inline-flex; align-items: center; gap: 2px; }
        .about-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .about-modal.active { opacity: 1; visibility: visible; }
        .about-content { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); border-radius: 16px; padding: 30px; max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.5); border: 2px solid rgba(255,165,120,0.3); position: relative; color: white; line-height: 1.6; }
        .about-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid rgba(255,165,120,0.3); }
        .about-title { font-size: 1.8rem; color: var(--header-color); display: flex; align-items: center; gap: 12px; }
        .close-modal { background: none; border: none; font-size: 1.5rem; color: #bbb; cursor: pointer; transition: color 0.3s ease; padding: 5px; }
        .close-modal:hover { color: var(--header-color); }
        .about-section { margin-bottom: 25px; }
        .about-section h3 { color: var(--header-color); font-size: 1.3rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .about-section p { margin-bottom: 12px; color: #e8e8e8; }
        .formula-box { background: rgba(0,0,0,0.4); padding: 15px; border-radius: 8px; margin: 15px 0; font-family: 'Courier New', monospace; border-left: 4px solid var(--header-color); }
        .formula-title { color: var(--header-color); font-weight: bold; margin-bottom: 8px; font-family: 'Segoe UI', sans-serif; }
        .historical-note { background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1)); border: 1px solid rgba(52, 152, 219, 0.3); border-radius: 8px; padding: 15px; margin: 15px 0; border-left: 4px solid rgb(255,165,120); }
        .historical-note .note-title { color: rgb(255,165,120); font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .applications-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px; }
        .application-item { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); }
        .application-item h4 { color: var(--header-color); margin-bottom: 8px; font-size: 1rem; }
        .application-item p { font-size: 0.9rem; color: #ccc; }
        .about-btn { background: linear-gradient(135deg, rgb(255,165,120), #2980b9); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 6px; box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3); }
        .about-btn:hover { background: linear-gradient(135deg, #2980b9, rgb(255,165,120)); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4); }
        @media (max-width: 768px) { .tooltip { max-width: 220px; font-size: 0.8rem; padding: 10px 12px; } .about-content { margin: 20px; padding: 20px; max-width: calc(100% - 40px); } .about-title { font-size: 1.4rem; } .applications-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="content-wrapper">
            <div class="container">
        <div class="header">
            <h1><i class="fas fa-chart-bar"></i> Geometric Distribution Calculator</h1>
            <p>Calculate probabilities and statistics for the Geometric distribution - modeling the number of trials until the first success</p>
        </div>

        <div class="main-content">
            <div class="controls-panel">
                <h3><i class="fas fa-sliders-h"></i> Parameters</h3>
                <div class="input-group">
                    <div class="tooltip-container with-icon">
                        <label for="p-input">Success Probability (p):</label>
                        <span class="tooltip-icon">
                            <i class="fas fa-info"></i>
                        </span>
                        <div class="tooltip bottom">
                            <strong>Success Probability (p)</strong>
                            Probability of success on each independent trial. Geometric models trials until first success.
                            <div class="tooltip-formula">0 < p ≤ 1, mean = 1/p trials</div>
                            <div class="tooltip-example">p=0.5: fair coin, p=0.1: rare success, p=0.8: likely success</div>
                        </div>
                    </div>
                    <input type="number" id="p-input" min="0" max="1" step="0.01" value="0.5" placeholder="Enter probability (0 < p ≤ 1)">
                    <div class="error" id="p-error"></div>
                </div>

                <h3><i class="fas fa-calculator"></i> Calculation Type</h3>
                <div class="calculation-tabs">
                    <button class="tab-button active" data-tab="probability">P(X = k)</button>
                    <button class="tab-button" data-tab="cumulative">P(X ≤ k)</button>
                    <button class="tab-button" data-tab="between">P(a ≤ X ≤ b)</button>
                </div>

                <div class="tab-content active" id="probability">
                    <div class="input-group">
                        <label for="k-input" class="tooltip" data-tooltip="Exact number of trials until first success">Number of trials (k):</label>
                        <input type="number" id="k-input" min="1" step="1" value="3" placeholder="Enter number of trials">
                        <div class="error" id="k-error"></div>
                    </div>
                </div>

                <div class="tab-content" id="cumulative">
                    <div class="input-group">
                        <label for="k-cum-input" class="tooltip" data-tooltip="Maximum number of trials for cumulative probability">Number of trials (k):</label>
                        <input type="number" id="k-cum-input" min="1" step="1" value="5" placeholder="Enter number of trials">
                        <div class="error" id="k-cum-error"></div>
                    </div>
                </div>

                <div class="tab-content" id="between">
                    <div class="input-group">
                        <label for="a-input" class="tooltip" data-tooltip="Minimum number of trials in the range">Lower bound (a):</label>
                        <input type="number" id="a-input" min="1" step="1" value="2" placeholder="Enter lower bound">
                        <div class="error" id="a-error"></div>
                    </div>
                    <div class="input-group">
                        <label for="b-input" class="tooltip" data-tooltip="Maximum number of trials in the range">Upper bound (b):</label>
                        <input type="number" id="b-input" min="1" step="1" value="6" placeholder="Enter upper bound">
                        <div class="error" id="b-error"></div>
                    </div>
                </div>

                <div style="text-align: center; padding: 10px; background: rgba(255, 152, 0, 0.1); border-radius: 6px; border: 0px solid rgba(255, 152, 0, 0.3); margin-top: 15px;">
                    <i class="fas fa-bolt" style="color: var(--header-color); margin-right: 8px;"></i>
                    <span style="color: var(--header-color); font-weight: 600; font-size: 0.9rem;">Results update instantly as you type!</span>
                </div>

                <button class="reset-button" onclick="resetAll()">
                    <i class="fas fa-redo"></i> Reset
                </button>

                <button class="info-button" onclick="showInfoPopup()">
                    <i class="fas fa-info-circle"></i> About Distribution
                </button>
            </div>

            <div class="visualization-panel">
                <h3 class="panel-title">
                    <i class="fas fa-chart-area"></i>
                    Results Panel - Visualizations & Statistics
                </h3>
                <!-- Combined Tabs and Chart Options Row -->
                <div class="tabs-and-options-row">
                    <!-- Tabs on the Left -->
                    <div class="tabs">
                        <div class="tab active" onclick="switchTab('pdf', this)">
                            PMF View
                        </div>
                        <div class="tab" onclick="switchTab('cdf', this)">
                            CDF View
                        </div>
                        <div class="tab" onclick="switchTab('both', this)">
                            Combined View
                        </div>
                    </div>
                    
                    <!-- Chart Options on the Right -->
                    <div class="chart-options-toolbar">
                        <div class="chart-option">
                                            <div class="tooltip-container with-icon">
                    <label for="precision" class="option-label">
                        <i class="fas fa-decimal"></i>
                        Precision
                    </label>
                    <span class="tooltip-icon">
                        <i class="fas fa-info"></i>
                    </span>
                    <div class="tooltip bottom">
                        <strong>Decimal Precision</strong>
                        Number of decimal places shown in calculations and results.
                        <div class="tooltip-example">4 decimals: 0.1234, 6 decimals: 0.123456</div>
                    </div>
                </div>
                            <select class="mini-dropdown" id="precision">
                                                                        <option selected value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                            </select>
                        </div>
                        <div class="chart-option">
                                            <div class="tooltip-container with-icon">
                    <label for="chartRange" class="option-label">
                        <i class="fas fa-expand-arrows-alt"></i>
                        Range
                    </label>
                    <span class="tooltip-icon">
                        <i class="fas fa-info"></i>
                    </span>
                    <div class="tooltip bottom">
                        <strong>Chart Range</strong>
                        Display range multiplier for better chart visualization.
                        <div class="tooltip-example">3x: shows 3× expected range, 5x: shows wider view</div>
                    </div>
                </div>
                            <select class="mini-dropdown" id="chartRange">
                                <option value="1">1x</option>
                                <option value="1.5">1.5x</option>
                                <option value="2">2x</option>
                                <option value="2.5">2.5x</option>
                                <option selected value="3">3x</option>
                                <option value="3.5">3.5x</option>
                                <option value="4">4x</option>
                                <option value="4.5">4.5x</option>
                                <option value="5">5x</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="tab-content active" id="pdfTab">
                    <div class="chart-container">
                        <div id="pdfChart"></div>
                    </div>
                </div>
                <div class="tab-content" id="cdfTab">
                    <div class="chart-container">
                        <div id="cdfChart"></div>
                    </div>
                </div>
                <div class="tab-content" id="bothTab">
                    <div class="chart-container">
                        <div id="combinedChart"></div>
                    </div>
                </div>
                <!-- Combined Results Row - Shaded Area + Statistics -->
                <div class="results-row">
                    <div class="probability-visualization">
                        <h4 style="color: var(--header-color); margin-bottom: 10px;">
                            <i class="fas fa-area-chart"></i>
                            Shaded Area Representation
                        </h4>
                        <div class="shaded-area-info">
                            <span id="equationText" style="font-weight: bold; color: var(--header-color);">Select calculation type to see shaded area</span>
                            <span id="percentageText" style="font-weight: bold; color: var(--header-color); display: none;"></span>
                        </div>
                    </div>
                    
                    <!-- Embedded Results & Statistics Panel -->
                    <div class="embedded-results-panel">
                        <h4 class="embedded-panel-title">
                            <i class="fas fa-chart-bar"></i>
                                                                Distribution Statistics
                        </h4>
                        <div class="embedded-stats-grid">
                            <div class="embedded-stat-item">
                                <div class="embedded-stat-value" id="stat-p">0.5</div>
                                <div class="embedded-stat-label">
                                    Prob (p)
                                </div>
                            </div>
                            <div class="embedded-stat-item">
                                <div class="embedded-stat-value" id="stat-mean">2.00</div>
                                <div class="embedded-stat-label">
                                    Mean
                                </div>
                            </div>
                            <div class="embedded-stat-item">
                                <div class="embedded-stat-value" id="stat-variance">2.00</div>
                                <div class="embedded-stat-label">
                                    Variance
                                </div>
                            </div>
                            <div class="embedded-stat-item">
                                <div class="embedded-stat-value" id="stat-stddev">1.41</div>
                                <div class="embedded-stat-label">
                                    Std Dev
                                </div>
                            </div>
                            <div class="embedded-stat-item">
                                <div class="embedded-stat-value" id="stat-mode">1</div>
                                <div class="embedded-stat-label">
                                    Mode
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <script>
        let currentChart = null;
        let isAnimating = false;
        let currentCalculationType = 'probability';

        // Animated number transition
        function animateNumber(element, start, end, duration = 800) {
            const startTime = performance.now();
            const isInteger = Number.isInteger(end);
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function
                const easeOut = 1 - Math.pow(1 - progress, 3);
                const current = start + (end - start) * easeOut;
                
                if (isInteger) {
                    element.textContent = Math.round(current).toFixed(0);
                } else {
                    element.textContent = current.toFixed(6);
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            
            requestAnimationFrame(update);
        }

        // Tab switching
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');
                currentCalculationType = button.dataset.tab;
                
                updateChart();
                updateResultDisplays();
                calculateResult();
            });
        });

        // Input validation
        function validateInputs() {
            const p = parseFloat(document.getElementById('p-input').value);
            let isValid = true;

            // Clear previous errors
            document.querySelectorAll('.error').forEach(el => el.textContent = '');

            if (isNaN(p) || p <= 0 || p > 1) {
                document.getElementById('p-error').textContent = 'Probability must be between 0 and 1 (exclusive of 0)';
                isValid = false;
            }

            if (currentCalculationType === 'probability') {
                const k = parseInt(document.getElementById('k-input').value);
                if (isNaN(k) || k < 1) {
                    document.getElementById('k-error').textContent = 'Number of trials must be a positive integer';
                    isValid = false;
                }
            } else if (currentCalculationType === 'cumulative') {
                const k = parseInt(document.getElementById('k-cum-input').value);
                if (isNaN(k) || k < 1) {
                    document.getElementById('k-cum-error').textContent = 'Number of trials must be a positive integer';
                    isValid = false;
                }
            } else if (currentCalculationType === 'between') {
                const a = parseInt(document.getElementById('a-input').value);
                const b = parseInt(document.getElementById('b-input').value);
                if (isNaN(a) || a < 1) {
                    document.getElementById('a-error').textContent = 'Lower bound must be a positive integer';
                    isValid = false;
                }
                if (isNaN(b) || b < 1) {
                    document.getElementById('b-error').textContent = 'Upper bound must be a positive integer';
                    isValid = false;
                }
                if (!isNaN(a) && !isNaN(b) && a > b) {
                    document.getElementById('b-error').textContent = 'Upper bound must be greater than or equal to lower bound';
                    isValid = false;
                }
            }

            return isValid;
        }

        // Geometric distribution functions (jStat doesn't have these)
        function geometricPMF(k, p) {
            if (k < 1 || p <= 0 || p > 1) return 0;
            return Math.pow(1 - p, k - 1) * p;
        }

        function geometricCDF(k, p) {
            if (k < 1 || p <= 0 || p > 1) return 0;
            return 1 - Math.pow(1 - p, k);
        }

        // Calculate result with feedback animations
        function calculateResult() {
            if (!validateInputs()) return;

            const p = parseFloat(document.getElementById('p-input').value);

            try {
                // Animate result elements
                const resultElement = document.getElementById('mainResult');
                const areaValueElement = document.getElementById('areaValue');
                
                if (resultElement) {
                    resultElement.classList.add('pulse');
                    setTimeout(() => resultElement.classList.remove('pulse'), 600);
                }
                
                if (areaValueElement) {
                    areaValueElement.classList.add('pulse');
                    setTimeout(() => areaValueElement.classList.remove('pulse'), 600);
                }

                updateChart();
                updateStatistics(p);
                updateResultDisplays();

            } catch (error) {
                const resultElement = document.getElementById('mainResult');
                const areaValueElement = document.getElementById('areaValue');
                if (resultElement) resultElement.textContent = 'Error';
                if (areaValueElement) areaValueElement.textContent = 'Error';
                console.error('Calculation error:', error);
            }
        }

        // Update statistics
        function updateStatistics(p) {
            const mean = 1 / p;
            const variance = (1 - p) / (p * p);
            const stddev = Math.sqrt(variance);
            const mode = 1;

            animateNumber(document.getElementById('stat-p'), parseFloat(document.getElementById('stat-p').textContent) || 0, p);
            animateNumber(document.getElementById('stat-mean'), parseFloat(document.getElementById('stat-mean').textContent) || 0, mean);
            animateNumber(document.getElementById('stat-variance'), parseFloat(document.getElementById('stat-variance').textContent) || 0, variance);
            animateNumber(document.getElementById('stat-stddev'), parseFloat(document.getElementById('stat-stddev').textContent) || 0, stddev);
            animateNumber(document.getElementById('stat-mode'), parseFloat(document.getElementById('stat-mode').textContent) || 0, mode);
        }

        // Update all charts
        function updateChart() {
            const p = parseFloat(document.getElementById('p-input').value);
            const precision = parseInt(document.getElementById('precision')?.value) || 4;
            const chartRange = parseFloat(document.getElementById('chartRange')?.value) || 3;
            
            if (isNaN(p) || p <= 0 || p > 1) return;

            // Generate data points for PMF and CDF
            const maxK = Math.min(20, Math.ceil(chartRange * (1 / p))); // Show reasonable range based on range setting
            const pmfData = [];
            const cdfData = [];
            const highlightData = [];

            for (let k = 1; k <= maxK; k++) {
                const pmf = geometricPMF(k, p);
                const cdf = geometricCDF(k, p);
                pmfData.push([k, pmf]);
                cdfData.push([k, cdf]);
            }

            // Determine highlighted areas based on current calculation type
            if (currentCalculationType === 'probability') {
                const targetK = parseInt(document.getElementById('k-input')?.value);
                if (!isNaN(targetK) && targetK >= 1 && targetK <= maxK) {
                    highlightData.push([targetK, geometricPMF(targetK, p)]);
                }
            } else if (currentCalculationType === 'cumulative') {
                const targetK = parseInt(document.getElementById('k-cum-input')?.value);
                if (!isNaN(targetK) && targetK >= 1) {
                    for (let k = 1; k <= Math.min(targetK, maxK); k++) {
                        highlightData.push([k, geometricPMF(k, p)]);
                    }
                }
            } else if (currentCalculationType === 'between') {
                const a = parseInt(document.getElementById('a-input')?.value);
                const b = parseInt(document.getElementById('b-input')?.value);
                if (!isNaN(a) && !isNaN(b) && a >= 1 && b >= a) {
                    for (let k = Math.max(1, a); k <= Math.min(maxK, b); k++) {
                        highlightData.push([k, geometricPMF(k, p)]);
                    }
                }
            }

            // Update PMF Chart with animations
            if (pdfChart && pdfChart.series) {
                try {
                    // Add smooth animation for data updates
                    pdfChart.series[0].setData(pmfData, {
                        duration: 800,
                        easing: 'easeOutQuart'
                    });
                    if (pdfChart.series[1]) {
                        pdfChart.series[1].setData(highlightData, {
                            duration: 600,
                            easing: 'easeOutBack'
                        });
                    }
                    
                    // Add pulse effect to chart container
                    const chartContainer = document.getElementById('pdfChart');
                    if (chartContainer) {
                        chartContainer.style.transform = 'scale(1.02)';
                        setTimeout(() => {
                            chartContainer.style.transform = 'scale(1)';
                        }, 200);
                    }
                } catch (error) {
                    console.warn('Error updating PMF chart:', error);
                }
            }

            // Update CDF Chart with animations
            if (cdfChart && cdfChart.series) {
                try {
                    cdfChart.series[0].setData(cdfData, {
                        duration: 900,
                        easing: 'easeInOutQuart'
                    });
                    
                    // Add glow effect to CDF chart
                    const cdfContainer = document.getElementById('cdfChart');
                    if (cdfContainer) {
                        cdfContainer.style.boxShadow = '0 0 20px rgba(39, 174, 96, 0.4)';
                        setTimeout(() => {
                            cdfContainer.style.boxShadow = '';
                        }, 600);
                    }
                } catch (error) {
                    console.warn('Error updating CDF chart:', error);
                }
            }

            // Update Combined Chart with staggered animations
            if (combinedChart && combinedChart.series) {
                try {
                    // Animate PMF first
                    combinedChart.series[0].setData(pmfData, {
                        duration: 700,
                        easing: 'easeOutQuart'
                    });
                    
                    // Then animate CDF with delay
                    setTimeout(() => {
                        if (combinedChart.series[1]) {
                            combinedChart.series[1].setData(cdfData, {
                                duration: 800,
                                easing: 'easeOutBack'
                            });
                        }
                    }, 200);
                    
                    // Add combined glow effect with orange theme
                    const combinedContainer = document.getElementById('combinedChart');
                    if (combinedContainer) {
                        combinedContainer.style.boxShadow = '0 0 25px rgba(255, 152, 0, 0.4)';
                        setTimeout(() => {
                            combinedContainer.style.boxShadow = '';
                        }, 1000);
                    }
                } catch (error) {
                    console.warn('Error updating Combined chart:', error);
                }
            }

            // Update area description and main result display
            updateResultDisplays();
        }

        function updateResultDisplays() {
            const equationTextEl = document.getElementById('equationText');
            const percentageTextEl = document.getElementById('percentageText');
            const mainResultEl = document.getElementById('mainResult');

            // Calculate and display the current result
            if (!validateInputs()) return;

            const p = parseFloat(document.getElementById('p-input').value);
            let result = 0;

            try {
                const precision = parseInt(document.getElementById('precision')?.value) || 4;
                let equationText = '';
                let percentageText = '';

                if (currentCalculationType === 'probability') {
                    const k = parseInt(document.getElementById('k-input')?.value);
                    result = geometricPMF(k, p);
                    const percentage = (result * 100).toFixed(precision);
                    equationText = `P(X = ${k}) = ${result.toFixed(precision)}`;
                    percentageText = `(${percentage}%)`;
                } else if (currentCalculationType === 'cumulative') {
                    const k = parseInt(document.getElementById('k-cum-input')?.value);
                    result = geometricCDF(k, p);
                    const percentage = (result * 100).toFixed(precision);
                    equationText = `P(X ≤ ${k}) = ${result.toFixed(precision)}`;
                    percentageText = `(${percentage}%)`;
                } else if (currentCalculationType === 'between') {
                    const a = parseInt(document.getElementById('a-input')?.value);
                    const b = parseInt(document.getElementById('b-input')?.value);
                    result = geometricCDF(b, p) - geometricCDF(a - 1, p);
                    const percentage = (result * 100).toFixed(precision);
                    equationText = `P(${a} ≤ X ≤ ${b}) = ${result.toFixed(precision)}`;
                    percentageText = `(${percentage}%)`;
                }

                // Update equation and percentage text with animations
                if (equationTextEl && percentageTextEl) {
                    equationTextEl.style.opacity = '0.5';
                    percentageTextEl.style.opacity = '0.5';
                    equationTextEl.style.transition = 'opacity 0.3s ease';
                    percentageTextEl.style.transition = 'opacity 0.3s ease';

                    setTimeout(() => {
                        equationTextEl.textContent = equationText;
                        percentageTextEl.textContent = percentageText;
                        percentageTextEl.style.display = percentageText ? 'inline' : 'none';
                        equationTextEl.style.opacity = '1';
                        percentageTextEl.style.opacity = '1';
                    }, 150);
                }

                // Update main result
                const formattedResult = result.toFixed(precision);
                if (mainResultEl) mainResultEl.textContent = formattedResult;
                
            } catch (error) {
                if (equationTextEl) equationTextEl.textContent = 'Error';
                if (percentageTextEl) percentageTextEl.textContent = '';
                if (mainResultEl) mainResultEl.textContent = 'Error';
                console.error('Result display error:', error);
            }
        }

        // Reset function with dramatic animation
        function resetAll() {
            // Add dramatic reset animation
            const leftPanel = document.querySelector('.left-panel');
            const rightPanel = document.querySelector('.right-panel');
            
            // Fade out effect
            if (leftPanel) {
                leftPanel.style.transform = 'scale(0.95)';
                leftPanel.style.opacity = '0.5';
            }
            if (rightPanel) {
                rightPanel.style.transform = 'scale(0.95)';
                rightPanel.style.opacity = '0.5';
            }
            
            setTimeout(() => {
                // Reset all values
                document.getElementById('p-input').value = '0.5';
                document.getElementById('k-input').value = '3';
                document.getElementById('k-cum-input').value = '5';
                document.getElementById('a-input').value = '2';
                document.getElementById('b-input').value = '6';
                document.getElementById('precision').value = '4';
                document.getElementById('chartRange').value = '3';
                
                // Clear errors
                document.querySelectorAll('.error').forEach(el => el.textContent = '');
                
                // Reset to first tab (PMF View)
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                const firstTab = document.querySelector('.tab');
                const firstTabContent = document.getElementById('pdfTab');
                if (firstTab) firstTab.classList.add('active');
                if (firstTabContent) firstTabContent.classList.add('active');
                
                currentCalculationType = 'probability';
                
                // Animate values back in
                if (leftPanel) {
                    leftPanel.style.transform = 'scale(1)';
                    leftPanel.style.opacity = '1';
                }
                if (rightPanel) {
                    rightPanel.style.transform = 'scale(1)';
                    rightPanel.style.opacity = '1';
                }
                
                // Update with animations
                setTimeout(() => {
                    updateChart();
                    updateStatistics(0.5);
                    calculateResult();
                    animateChartUpdate();
                }, 200);
            }, 300);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'r') {
                e.preventDefault();
                resetAll();
            } else if (e.key === 'Enter') {
                e.preventDefault();
                calculateResult();
            } else if (e.key === 'Escape') {
                document.querySelectorAll('input').forEach(input => input.blur());
            }
        });

        // Debounce function for smooth input handling
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Calculate with visual feedback
        function calculateWithFeedback() {
            // Add visual feedback to input fields
            const inputFields = document.querySelectorAll('.input-field, input[type="number"]');
            inputFields.forEach(field => {
                field.style.transition = 'all 0.3s ease';
                field.style.borderColor = 'var(--header-color)';
                field.style.boxShadow = '0 0 8px rgba(255, 152, 0, 0.3)';
                setTimeout(() => {
                    field.style.borderColor = '';
                    field.style.boxShadow = '';
                }, 600);
            });

            if (validateInputs()) {
                updateChart();
                updateResultDisplays();
                calculateResult();
            }
        }

        // Real-time input updates with debouncing
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', debounce(calculateWithFeedback, 250));
        });

        // Add event listeners for chart options with animations
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const precisionSelect = document.getElementById('precision');
                const chartRangeSelect = document.getElementById('chartRange');
                
                if (precisionSelect) {
                    precisionSelect.addEventListener('change', function() {
                        // Add ripple effect to precision change
                        this.style.transform = 'scale(1.1)';
                        this.style.background = 'rgba(255, 152, 0, 0.2)';
                        setTimeout(() => {
                            this.style.transform = 'scale(1)';
                            this.style.background = '';
                        }, 300);
                        
                        debounce(calculateWithFeedback, 250)();
                    });
                }
                
                if (chartRangeSelect) {
                    chartRangeSelect.addEventListener('change', function() {
                        // Add ripple effect to range change
                        this.style.transform = 'scale(1.1)';
                        this.style.background = 'rgba(255, 152, 0, 0.2)';
                        setTimeout(() => {
                            this.style.transform = 'scale(1)';
                            this.style.background = '';
                        }, 300);
                        
                        debounce(calculateWithFeedback, 250)();
                    });
                }
            }, 100);
        });

        // Enhanced animation trigger for option changes
        function animateChartUpdate() {
            // Create a wave effect across all visible charts
            const visibleCharts = document.querySelectorAll('.tab-content.active [id$="Chart"]');
            visibleCharts.forEach((chart, index) => {
                setTimeout(() => {
                    chart.style.transform = 'scale(0.95)';
                    chart.style.opacity = '0.7';
                    setTimeout(() => {
                        chart.style.transform = 'scale(1)';
                        chart.style.opacity = '1';
                    }, 200);
                }, index * 100);
            });
        }

        // Tab switching functionality
        function switchTab(tabName, clickedElement) {
            const tabElement = clickedElement || event?.target || document.querySelector(`.tab[onclick*="${tabName}"]`);

            if (!tabElement) {
                console.error('Tab element not found for:', tabName);
                return;
            }

            // Add switching animation to the clicked tab
            tabElement.classList.add('switching');
            setTimeout(() => {
                tabElement.classList.remove('switching');
            }, 800);

            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab content with delay for smooth transition
            setTimeout(() => {
                document.getElementById(tabName + 'Tab').classList.add('active');
                tabElement.classList.add('active');

                // Trigger chart animations when switching tabs
                setTimeout(() => {
                    triggerChartAnimations(tabName);
                }, 300);
            }, 100);
        }

        function triggerChartAnimations(tabName) {
            // Add dramatic entrance animations for tab switching
            const activeChart = document.querySelector('.tab-content.active [id$="Chart"]');
            if (activeChart) {
                // Slide in from right effect
                activeChart.style.transform = 'translateX(30px)';
                activeChart.style.opacity = '0';
                
                setTimeout(() => {
                    activeChart.style.transform = 'translateX(0)';
                    activeChart.style.opacity = '1';
                }, 100);
            }
            
            // Force chart redraw with animations
            switch(tabName) {
                case 'pdf':
                    if (pdfChart) {
                        // Add bounce-in effect for PMF
                        setTimeout(() => {
                            updateChart();
                            if (pdfChart.series[0]) {
                                pdfChart.series[0].update({
                                    animation: {
                                        duration: 1200,
                                        easing: 'easeOutBounce'
                                    }
                                });
                            }
                        }, 200);
                    }
                    break;
                case 'cdf':
                    if (cdfChart) {
                        // Add smooth wave effect for CDF
                        setTimeout(() => {
                            updateChart();
                            if (cdfChart.series[0]) {
                                cdfChart.series[0].update({
                                    animation: {
                                        duration: 1000,
                                        easing: 'easeInOutSine'
                                    }
                                });
                            }
                        }, 200);
                    }
                    break;
                case 'both':
                    if (combinedChart) {
                        // Add staggered entrance for combined view
                        setTimeout(() => {
                            updateChart();
                            if (combinedChart.series[0]) {
                                combinedChart.series[0].update({
                                    animation: {
                                        duration: 800,
                                        easing: 'easeOutQuart'
                                    }
                                });
                            }
                            setTimeout(() => {
                                if (combinedChart.series[1]) {
                                    combinedChart.series[1].update({
                                        animation: {
                                            duration: 1000,
                                            easing: 'easeOutBack'
                                        }
                                    });
                                }
                            }, 300);
                        }, 200);
                    }
                    break;
            }
        }

        // Chart instances
        let pdfChart, cdfChart, combinedChart;

        // About Modal Functions
        function openAboutModal() {
            const modal = document.getElementById('aboutModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeAboutModal() {
            const modal = document.getElementById('aboutModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Popup functions
        function showInfoPopup() {
            document.getElementById('infoPopup').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function hideInfoPopup() {
            document.getElementById('infoPopup').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Initialize charts
        function initializeCharts() {
            if (typeof Highcharts === 'undefined') {
                console.error('Highcharts not loaded');
                return;
            }

            // Set dark theme for all charts
            Highcharts.setOptions({
                chart: {
                    backgroundColor: 'transparent',
                    style: {
                        fontFamily: 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif'
                    }
                },
                colors: ['#ff9800', '#27ae60', '#e74c3c', '#f39c12', '#9b59b6'],
                title: {
                    style: {
                        color: 'white'
                    }
                },
                xAxis: {
                    gridLineColor: 'rgba(255,255,255,0.1)',
                    lineColor: 'rgba(255,255,255,0.3)',
                    tickColor: 'rgba(255,255,255,0.3)',
                    labels: {
                        style: {
                            color: 'white'
                        }
                    },
                    title: {
                        style: {
                            color: 'white'
                        }
                    }
                },
                yAxis: {
                    gridLineColor: 'rgba(255,255,255,0.1)',
                    lineColor: 'rgba(255,255,255,0.3)',
                    tickColor: 'rgba(255,255,255,0.3)',
                    labels: {
                        style: {
                            color: 'white'
                        }
                    },
                    title: {
                        style: {
                            color: 'white'
                        }
                    }
                },
                legend: {
                    itemStyle: {
                        color: 'white'
                    }
                },
                plotOptions: {
                    column: {
                        marker: {
                            enabled: false
                        }
                    }
                }
            });

            // PMF Chart
            pdfChart = Highcharts.chart('pdfChart', {
                chart: {
                    type: 'column',
                    animation: {
                        duration: 800,
                        easing: 'easeOutQuart'
                    }
                },
                title: {
                    text: null
                },
                xAxis: {
                    title: {
                        text: 'Number of Trials (k)'
                    }
                },
                yAxis: {
                    title: {
                        text: 'Probability'
                    },
                    min: 0
                },
                series: [{
                    name: 'PMF',
                    data: [],
                    color: '#ff9800',
                    borderWidth: 0
                }, {
                    name: 'Highlighted',
                    data: [],
                    color: 'rgba(255, 152, 0, 0.4)',
                    borderWidth: 0
                }],
                tooltip: {
                    shared: true,
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    style: {
                        color: 'white'
                    }
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                }
            });

            // CDF Chart
            cdfChart = Highcharts.chart('cdfChart', {
                chart: {
                    type: 'line',
                    animation: {
                        duration: 800,
                        easing: 'easeOutQuart'
                    }
                },
                title: {
                    text: null
                },
                xAxis: {
                    title: {
                        text: 'Number of Trials (k)'
                    }
                },
                yAxis: {
                    title: {
                        text: 'P(X ≤ k)'
                    },
                    min: 0,
                    max: 1
                },
                series: [{
                    name: 'CDF',
                    data: [],
                    color: '#27ae60',
                    lineWidth: 3,
                    shadow: true
                }],
                tooltip: {
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    style: {
                        color: 'white'
                    }
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                }
            });

            // Combined Chart
            combinedChart = Highcharts.chart('combinedChart', {
                chart: {
                    type: 'line',
                    animation: {
                        duration: 800,
                        easing: 'easeOutQuart'
                    }
                },
                title: {
                    text: null
                },
                xAxis: {
                    title: {
                        text: 'Number of Trials (k)'
                    }
                },
                yAxis: [{
                    title: {
                        text: 'PMF',
                        style: {
                            color: '#ff9800'
                        }
                    },
                    min: 0,
                    labels: {
                        style: {
                            color: '#ff9800'
                        }
                    }
                }, {
                    title: {
                        text: 'CDF',
                        style: {
                            color: '#27ae60'
                        }
                    },
                    min: 0,
                    max: 1,
                    opposite: true,
                    labels: {
                        style: {
                            color: '#27ae60'
                        }
                    }
                }],
                series: [{
                    name: 'PMF',
                    data: [],
                    color: '#ff9800',
                    type: 'column',
                    yAxis: 0
                }, {
                    name: 'CDF',
                    data: [],
                    color: '#27ae60',
                    lineWidth: 3,
                    type: 'line',
                    yAxis: 1
                }],
                tooltip: {
                    shared: true,
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    style: {
                        color: 'white'
                    }
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            updateChart();
            updateStatistics(0.5);
            // Calculate initial result with default values
            calculateResult();
        });
    </script>

    <!-- Info Popup Modal -->
    <div class="popup-overlay" id="infoPopup" onclick="hideInfoPopup()">
        <div class="popup-modal" onclick="event.stopPropagation()">
            <div class="popup-header">
                <h3 class="popup-title"><i class="fas fa-info-circle"></i> About the Geometric Distribution</h3>
                <button class="popup-close" onclick="hideInfoPopup()">×</button>
            </div>
            <div class="popup-content">
                <p>The Geometric distribution models the number of independent Bernoulli trials needed to get the first success. It's used in scenarios like:</p>
                <ul>
                    <li>Quality control testing until finding the first defective item</li>
                    <li>Number of attempts needed to achieve a goal</li>
                    <li>Time until first customer arrival or first sale</li>
                </ul>
                
                <div class="popup-formula">
                    <strong>Probability Mass Function:</strong><br>
                    P(X = k) = (1-p)^(k-1) × p<br><br>
                    <strong>Cumulative Distribution Function:</strong><br>
                    P(X ≤ k) = 1 - (1-p)^k<br><br>
                    <strong>Mean:</strong> μ = 1/p<br>
                    <strong>Variance:</strong> σ² = (1-p)/p²
                </div>
            </div>
        </div>
    </div>

    <!-- About Geometric Distribution Modal -->
    <div id="aboutModal" class="about-modal">
        <div class="about-content">
            <div class="about-header">
                <div class="about-title">
                    <i class="fas fa-chart-bar"></i>
                    About the Geometric Distribution
                </div>
                <button class="close-modal" onclick="closeAboutModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-info-circle"></i> Definition</h3>
                <p>The Geometric distribution is a discrete probability distribution that models the number of trials needed to achieve the first success in a sequence of independent Bernoulli trials. It's the discrete analog of the exponential distribution and exhibits the memoryless property.</p>
                
                <div class="formula-box">
                    <div class="formula-title">Probability Mass Function</div>
                    P(X = k) = (1-p)^(k-1) × p<br>
                    where k = 1, 2, 3, ... (number of trials) and 0 < p ≤ 1
                </div>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-user-graduate"></i> Historical Background</h3>
                
                <div class="historical-note">
                    <div class="note-title">
                        <i class="fas fa-dice"></i>
                        Classical Probability Origins
                    </div>
                    <p>The geometric distribution emerged from early probability theory in the 17th century, particularly in games of chance. Questions like "How many coin flips until the first heads?" led to its mathematical formulation by early probabilists.</p>
                </div>

                <div class="historical-note">
                    <div class="note-title">
                        <i class="fas fa-memory"></i>
                        Memoryless Property Discovery
                    </div>
                    <p>The geometric distribution's unique memoryless property was formally recognized in the 18th century. This property states that P(X > s + t | X > s) = P(X > t), meaning past failures don't affect future success probability.</p>
                </div>

                <div class="historical-note">
                    <div class="note-title">
                        <i class="fas fa-satellite"></i>
                        Modern Applications
                    </div>
                    <p>In the 20th century, the geometric distribution became crucial in reliability engineering, telecommunications, and computer science for modeling waiting times and system failures.</p>
                </div>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-key"></i> Key Properties</h3>
                <p><strong>Memoryless Property:</strong> Past failures don't affect the probability of future success - each trial is independent.</p>
                <p><strong>Discrete Waiting Time:</strong> Models the number of trials (not time) until the first success occurs.</p>
                <p><strong>Right-Skewed:</strong> Most likely outcome is k=1 (success on first trial), with decreasing probability for higher k.</p>
                <p><strong>Infinite Support:</strong> Theoretically, success could take any positive number of trials.</p>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-calculator"></i> Mathematical Properties</h3>
                
                <div class="formula-box">
                    <div class="formula-title">Statistical Measures</div>
                    <strong>Mean:</strong> μ = 1/p<br>
                    <strong>Variance:</strong> σ² = (1-p)/p²<br>
                    <strong>Standard Deviation:</strong> σ = √[(1-p)/p²]<br>
                    <strong>Mode:</strong> k = 1 (always)<br>
                    <strong>Support:</strong> k ∈ {1, 2, 3, ...}
                </div>

                <div class="formula-box">
                    <div class="formula-title">Memoryless Property</div>
                    <strong>Formula:</strong> P(X > s + t | X > s) = P(X > t)<br>
                    <strong>Interpretation:</strong> Given k failures, probability of needing t more trials is independent of k<br>
                    <strong>Unique Feature:</strong> Only discrete distribution with this property
                </div>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-globe"></i> Real-World Applications</h3>
                
                <div class="applications-grid">
                    <div class="application-item">
                        <h4><i class="fas fa-network-wired"></i> Network & Telecommunications</h4>
                        <p>Modeling packet transmission attempts until successful delivery, network retry mechanisms, and communication protocol analysis.</p>
                    </div>

                    <div class="application-item">
                        <h4><i class="fas fa-cogs"></i> Reliability Engineering</h4>
                        <p>System restart attempts, component testing until first failure, and maintenance scheduling based on failure patterns.</p>
                    </div>

                    <div class="application-item">
                        <h4><i class="fas fa-gamepad"></i> Gaming & Simulation</h4>
                        <p>Modeling attempts until winning in games of chance, random event generation, and Monte Carlo simulations.</p>
                    </div>

                    <div class="application-item">
                        <h4><i class="fas fa-search"></i> Quality Control</h4>
                        <p>Number of inspections until finding first defective item, testing procedures, and acceptance sampling strategies.</p>
                    </div>

                    <div class="application-item">
                        <h4><i class="fas fa-chart-line"></i> Marketing & Sales</h4>
                        <p>Sales calls until first conversion, customer contact attempts, and lead generation success modeling.</p>
                    </div>

                    <div class="application-item">
                        <h4><i class="fas fa-code"></i> Computer Science</h4>
                        <p>Algorithm analysis for randomized searches, hash table collision resolution, and distributed system recovery.</p>
                    </div>
                </div>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-lightbulb"></i> When to Use the Geometric Distribution</h3>
                <p><strong>Perfect for modeling:</strong></p>
                <ul style="margin-left: 20px; color: #e8e8e8;">
                    <li>Number of trials until first success</li>
                    <li>Waiting time scenarios (discrete trials)</li>
                    <li>Independent Bernoulli trials with constant success probability</li>
                    <li>Situations where the memoryless property applies</li>
                    <li>Quality control and inspection processes</li>
                    <li>Network and communication reliability analysis</li>
                </ul>

                <p><strong>Key Assumptions:</strong></p>
                <ul style="margin-left: 20px; color: #e8e8e8;">
                    <li>Trials are independent and identical</li>
                    <li>Each trial has exactly two outcomes (success/failure)</li>
                    <li>Probability of success (p) remains constant</li>
                    <li>We stop at the first success</li>
                </ul>
            </div>

            <div class="about-section">
                <h3><i class="fas fa-cogs"></i> Using This Calculator</h3>
                <p>Set your success probability p and choose your calculation type. The calculator shows probabilities for exactly k trials, at most k trials, or between a and b trials until first success. The memoryless property means past failures never affect future probabilities - each trial is a fresh start!</p>
            </div>
        </div>
    </div>
</body>
</html> 